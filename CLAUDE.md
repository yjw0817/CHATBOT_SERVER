## Agent 활용 지침

### 1. 에이전트 활용 기준
```
판단/감각/분석 필요? → 에이전트
기계적 치환/추가/삭제? → 직접
```

- 필요시 스킬, 플러그인, 에이전트를 자유롭게 활용
- 필요한 에이전트가 없으면 직접 생성 가능
- 에이전트에게 작업 완수까지 지시 후, 결과 만족시 사용자에게 보고

### 2. 도구 활용
- 스킬/플러그인: 필요시 검색/추가 가능 (무료만)
- MCP: 컨텍스트 제한으로 기본 비활성화, 필요시 사용자 승인 요청

### 3. 커뮤니케이션
- 사용자에게 맞추지 않고 명확하고 냉정하게 답변
- 틀리면 틀렸다고, 맞으면 맞다고 말함
- **모르면서 안다고 하지 않기**: 이해 못한 부분은 구체적으로 무엇이 불명확한지 질문
- **무조건 "바로 합니다" 금지**: 사용자가 명시적으로 진행하라고 할 때만 작업 시작
- **모르겠으면 묻는다**: 추측하지 말고 사용자에게 질문. 추측이 명확하다고 판단될 때에도 먼저 묻고 진행
- **기억하지 못하는 것을 "맞습니다"라고 하지 않기**: 요약/로그에서 읽은 것은 "이해했습니다"로 응답
- **빠른 진행보다 정확한 이해가 우선**: 사용자 의도를 정확히 파악한 후 작업. 중요한 결정/규칙은 CLAUDE.md에 기록

### 4. 롤백/되돌리기 규칙 (중요)
- **롤백 전 반드시 사용자에게 범위 확인**: 어떤 파일을, 어떤 시점으로 되돌릴지 구체적으로 확인
- 커밋되지 않은 작업은 롤백하면 복구 불가능하므로, 완성된 기능이 포함되어 있는지 반드시 확인
- `git checkout HEAD --` 같은 전체 되돌리기 절대 무확인 실행 금지
- 롤백 대상이 아닌 완성된 작업은 먼저 커밋하고 나서 롤백 진행

### 5. 원본 텍스트 표시 규칙 (절대 위반 금지)
- **원본 텍스트는 DB raw_text 필드의 내용을 있는 그대로(verbatim) 표시**
- 요약, 정리, AI 가공, 축약, 정제 절대 금지
- source_quotes나 LLM 생성 텍스트를 원본이라고 표시하지 않음
- 헤딩 매칭으로 분리하더라도 해당 구간의 raw_text를 그대로 보여줌

### 6. 작업 규칙
- **기능별 즉시 커밋**: 여러 기능을 한번에 작업하지 말고 하나 완성할 때마다 커밋. 롤백 시 피해 범위 최소화
- **같은 실수 반복 금지**: 사용자가 수정 요청한 사항을 되돌리는 방향으로 재수정하지 않기
- **응답 간결하게**: 불필요한 설명, 반복 나열 최소화. 토큰 낭비 줄이기
- **2번 이상 같은 방향으로 실패하면 멈추고 사용자와 논의**: 방향 자체가 틀렸을 수 있음
- **대규모 수정 전 현재 상태 먼저 커밋**: 큰 변경 전에 복원 지점 만들기
- **요청하지 않은 코드 건드리지 않기**: 리팩토링, 주석 추가, 포맷 정리 등 요청 범위 밖 변경 금지
- **파일 수정 전 반드시 현재 상태 읽기**: 이전에 읽은 내용을 기억에 의존하지 않고 수정 직전에 다시 확인
- **사용자의 핵심 의도를 한 줄로 정리한 뒤 작업 시작**: 여러 요청이 섞여 있을 때 해석이 틀어지는 것 방지

### 7. 원본 비교 기능 동작 규칙
- Manualize 시 LLM이 섹션을 나누면서 헤딩 매칭으로 원본의 어느 구간에 해당하는지 결정
- 원본 비교 클릭 시: 좌(매칭된 원본 raw_text 구간 그대로) · 우(매뉴얼 텍스트) 섹션별 표시
- 헤딩 매칭 실패한 섹션은 섹션 분리 없이 raw_text 전체를 그대로 표시
- 에디터 모달: 상단(제목)/하단(버튼) 고정, 중앙 섹션 영역만 스크롤

### 6. Git 커밋 규칙
- **코드 변경 후 항상 커밋**: 기능 구현/수정 완료 시 즉시 커밋
- 사용자가 별도로 요청하지 않아도 변경사항이 완료되면 자동으로 커밋
- 커밋 메시지는 영문으로 작성, 변경 내용을 명확히 기술
