# AI Coder 지침 — “매뉴얼 가다듬기 + 에디터에서 보강/수정(Autocomplete 포함)”

## 목표
업로드된 문서를 AI가 먼저 “정돈된 매뉴얼 초안”으로 가다듬고,
그 다음 부족/모호/충돌 지점을 **에디터에서 바로 수정**하게 해서
최종적으로 RAG 품질을 올린다.

---

## 1) Manual Upgrader(가다듬기) 결과를 “편집 가능한 초안”으로 제공
- Manualize는 섹션 6개 초안을 만든다.
- 새 버튼: `AI 가다듬기(Upgrade Draft)`
  - 입력: 기존 manual_sections(없으면 extract_text)
  - 출력: 섹션별 `draft_text` + `change_summary` + `todo_questions` + `quality_issues`

## 2) 에디터(UI)에서 바로 수정 가능해야 함
- 섹션별 textarea/editor 제공
- `수정모드`에서 사용자가 직접 타이핑 가능
- `AI 재검증` 버튼: 현재 편집중 텍스트 기준 Gate(RED/YELLOW)
- RED=0일 때만 `저장` 활성화

## 3) “모호/누락”을 에디터에서 쉽게 고치게 하는 UX
- Gate 결과의 이슈(예: AMBIGUOUS/MISSING)를
  - 해당 섹션 옆에 “수정 포인트 카드”로 표시
  - 클릭하면 에디터 커서가 해당 위치로 이동(가능하면)
- `AI 자동 보강` 버튼:
  - 선택된 이슈 1개를 해결하는 문장/문단을 제안하고
  - 사용자는 “적용(Insert)” or “무시” 선택

## 4) Autocomplete / AI 보조 편집(가볍게 시작)
- 에디터에 단축버튼 3개만 우선 구현(데모용)
  1) `한 문장 다듬기` (선택 텍스트를 더 명확하게)
  2) `누락 채우기` (이슈 코드/질문 기반으로 필요한 문장 생성)
  3) `표준 문구 추천` (환불/예약/운영시간 같은 템플릿 문구 추천)
- 구현 방식: 선택 텍스트/현재 섹션을 서버로 보내서 LLM 호출 → 제안문 반환 → “적용” 버튼

## 5) 저장/승인 흐름
- 저장은 manual_sections 업데이트 + reindex
- `RAG 반영(승인)` 버튼은 RED=0 + 저장 완료 후에만 활성화

## 6) API 요구사항은 Advanced(개발자용)로 분리
- 기본 품질/편집 화면에 API_NEEDED는 숨김
- 개발자용 화면에서만 “필요 기능 설명 + JSON/YAML export” 제공
