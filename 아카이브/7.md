# Coding AI Prompt — Gate/Extract/Manualize 팝업(모달) “내용” 스타일링만 적용 (롤백 후 최소 변경)

## 상황
- 최근 변경이 제대로 동작하지 않아 롤백 완료
- 현재 상태에서:
  - Gate 클릭 시 진행중 표시/팝업은 정상 동작
  - 팝업에 결과 텍스트가 뜨긴 하지만 “예쁘게” 스타일링이 부족함
- 요청: 기능 로직은 건드리지 말고, **팝업에 표시되는 결과 내용을 보기 좋게 스타일링**만 적용

## 목표
1) 기존 팝업 동작은 유지(롤백 상태 유지)
2) 팝업 본문에 들어가는 “텍스트/JSON/결과”를 **카드/뱃지/리스트** 형태로 보기 좋게 렌더
3) Gate 결과(RED/YELLOW), Extract 결과(미리보기), Manualize 결과(섹션 목록), 에러 메시지(스택/응답 텍스트)를 각각 보기 좋게 표시
4) 가능한 한 **CSS + 템플릿(partial)** 중심으로 적용(코드 변경 최소)

---

# 1) 현재 팝업 방식 파악(변경 최소를 위해)
프로젝트에서 팝업이 뜨는 방식이 아래 중 어떤 형태인지 확인한 뒤, 해당 경로에만 스타일을 붙인다.

A) `window.alert(...)` 형태 (브라우저 기본 alert)
B) `<dialog>` 또는 custom `<div id="modal">` 기반 모달
C) bootstrap 같은 라이브러리 모달

✅ 본 작업은 **B/C 기준**으로 진행한다.  
만약 A(alert)만 쓰고 있다면, “팝업창”의 스타일링은 불가능하므로 **alert를 custom modal로 바꾸는 최소 패치**가 필요하다.
(하지만 사용자는 “팝업은 잘 뜬다” + “이쁘더라”라고 했으므로 custom modal이 이미 있을 가능성이 큼)

---

# 2) 팝업 컨테이너에 공통 class를 붙여 스타일 적용
팝업 본문을 담는 element(예: `#popup-content`, `#modal-body`, `.popup-body`)를 찾아서
공통 클래스를 적용한다:

- 컨테이너 class: `.argos-popup`
- 내용 영역 class: `.argos-popup__body`

예:
```html
<div id="modal-body" class="argos-popup__body"></div>
3) CSS 추가 (static/style.css) — “예쁜” 팝업 본문 스타일
아래 CSS를 static/style.css에 추가한다(기존 스타일과 충돌 없게 prefix 사용).

/* Popup body base */
.argos-popup__body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
  font-size: 14px;
  line-height: 1.55;
  color: #111827;
}

/* 카드 레이아웃 */
.argos-card{
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 12px 14px;
  background: #ffffff;
  box-shadow: 0 6px 18px rgba(0,0,0,.06);
  margin: 10px 0;
}

/* 타이틀/서브텍스트 */
.argos-title{
  font-size: 15px;
  font-weight: 700;
  margin: 0 0 6px 0;
}
.argos-sub{
  color: #6b7280;
  font-size: 12px;
  margin: 0;
}

/* 뱃지 */
.argos-badges{ display:flex; gap:8px; flex-wrap:wrap; margin: 8px 0 0 0; }
.argos-badge{
  display:inline-flex; align-items:center; gap:6px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
}
.argos-badge--red{ border-color:#fecaca; background:#fef2f2; color:#991b1b; }
.argos-badge--yellow{ border-color:#fde68a; background:#fffbeb; color:#92400e; }
.argos-badge--ok{ border-color:#bbf7d0; background:#f0fdf4; color:#166534; }
.argos-badge--info{ border-color:#bfdbfe; background:#eff6ff; color:#1e40af; }

/* 리스트 */
.argos-list{ margin: 10px 0 0 0; padding-left: 18px; }
.argos-list li{ margin: 6px 0; }
.argos-list code{ background:#f3f4f6; padding:2px 6px; border-radius:6px; }

/* 코드/JSON 블록 */
.argos-pre{
  background: #0b1220;
  color: #e5e7eb;
  border-radius: 12px;
  padding: 12px;
  overflow:auto;
  white-space: pre-wrap;
  word-break: break-word;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: 12px;
  margin: 10px 0 0 0;
}

/* 경고/에러 박스 */
.argos-alert{
  border-radius: 12px;
  padding: 10px 12px;
  border: 1px solid #e5e7eb;
  background:#f9fafb;
}
.argos-alert--error{ border-color:#fecaca; background:#fef2f2; color:#991b1b; }
.argos-alert--warn{ border-color:#fde68a; background:#fffbeb; color:#92400e; }
4) 팝업 내용 렌더 방식별 적용
4-A) 팝업에 HTML을 넣는 구조라면(권장)
Gate/Extract/Manualize가 팝업에 “문자열 HTML”을 넣는 부분을 찾아,
아래 템플릿 형태로 출력하도록 수정한다.
(기능 변경 없음: 단지 innerHTML 텍스트를 예쁜 HTML로 바꿈)

Gate 결과 렌더 HTML 예시
입력 데이터:

red_count, yellow_count

issues: [{level, code, message}]

출력 HTML:

<div class="argos-card">
  <div class="argos-title">품질 검사(Gate) 결과</div>
  <p class="argos-sub">RED는 승인 불가, YELLOW는 개선 권고입니다.</p>

  <div class="argos-badges">
    <span class="argos-badge argos-badge--red">RED: {{red_count}}</span>
    <span class="argos-badge argos-badge--yellow">YELLOW: {{yellow_count}}</span>
    {% if red_count == 0 %}
      <span class="argos-badge argos-badge--ok">Approve 가능</span>
    {% else %}
      <span class="argos-badge argos-badge--red">Approve 불가</span>
    {% endif %}
  </div>

  {% if issues and issues|length > 0 %}
  <ul class="argos-list">
    {% for it in issues %}
      <li><strong>[{{it.level}}/{{it.code}}]</strong> {{it.message}}</li>
    {% endfor %}
  </ul>
  {% else %}
    <div class="argos-alert argos-alert--warn" style="margin-top:10px;">이슈 없음</div>
  {% endif %}
</div>
Extract 결과(미리보기) 렌더 HTML 예시
<div class="argos-card">
  <div class="argos-title">텍스트 추출(Extract) 결과</div>
  <p class="argos-sub">미리보기는 일부만 표시될 수 있습니다.</p>
  <div class="argos-badges">
    <span class="argos-badge argos-badge--info">chars: {{char_count}}</span>
  </div>
  <pre class="argos-pre">{{preview_text}}</pre>
</div>
Manualize 결과(섹션 목록) 렌더 HTML 예시
<div class="argos-card">
  <div class="argos-title">매뉴얼화(Manualize) 완료</div>
  <p class="argos-sub">생성된 섹션 목록</p>
  <ul class="argos-list">
    {% for s in sections %}
      <li>{{s}}</li>
    {% endfor %}
  </ul>
  <div class="argos-badges">
    {% if llm_used %}
      <span class="argos-badge argos-badge--ok">LLM 사용: true</span>
    {% else %}
      <span class="argos-badge argos-badge--yellow">LLM 사용: false</span>
    {% endif %}
  </div>
</div>
에러 렌더 HTML 예시
<div class="argos-card">
  <div class="argos-title">오류</div>
  <div class="argos-alert argos-alert--error">{{message}}</div>
  {% if detail %}
    <pre class="argos-pre">{{detail}}</pre>
  {% endif %}
</div>
✅ 위 템플릿은 Jinja로 만들거나, JS에서 문자열로 만들어 넣어도 됨(현재 구조에 맞게).

4-B) 팝업에 JSON 문자열만 넣는 구조라면(최소 변경)
현재 팝업이 그냥 JSON 텍스트만 보여주는 경우,
JSON 텍스트를 <pre class="argos-pre">에 감싸기만 해도 “이쁘게” 보임.

예:

modalBody.innerHTML = `<div class="argos-card">
  <div class="argos-title">Gate 결과</div>
  <pre class="argos-pre">${escapeHtml(JSON.stringify(data, null, 2))}</pre>
</div>`;
5) 적용 범위
기존 기능 로직(검사/추출/매뉴얼화/승인/리인덱싱)은 변경하지 말 것

“팝업에 채우는 내용”만 카드/뱃지/리스트로 보기 좋게 바꾸기

최소 변경 우선: CSS 추가 + 팝업 출력 HTML 개선

6) 완료 기준(테스트)
Gate 결과 팝업: RED/YELLOW 뱃지, 이슈 리스트가 카드 형태로 표시

Extract 팝업: chars 뱃지 + 미리보기 텍스트가 검은 코드 블록(pre)로 예쁘게 표시

Manualize 팝업: 섹션 목록이 리스트로 표시 + LLM 사용 여부 뱃지 표시

에러 팝업: 빨간 alert 박스 + detail은 pre로 표시

7) 변경 파일 예상
static/style.css (CSS 추가)

(팝업 내용 생성하는) templates/.html 또는 static/js/.js 중 1~2개 파일

Gate/Extract/Manualize 응답을 팝업에 넣는 코드 위치를 찾아 HTML로 변경

끝.

::contentReference[oaicite:0]{index=0}
